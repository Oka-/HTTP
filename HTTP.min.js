// Colin 'Oka' Hall-Coates <yo@oka.io>
// MIT 2015
window.HTTP=!window.hasOwnProperty("HTTP")&&function(){function e(e,t){e.delay&&window.clearTimeout(e.delay),t&&t.call(),e.request.readyState<2&&(e.delay=window.setTimeout(function(){e.request.send(e.data)},u.delay))}function t(t,n){var r={callbacks:[],data:null,delay:null,request:new XMLHttpRequest},a={cred:function(){return e(r,function(){r.request.withCredentials=!0}),this},"do":function(t){return e(r,function(){t.call(r.request,r.request.response,r.request.status,r.request)}),this},data:function(t){return e(r,function(){r.data=t}),this},mime:function(t){return e(r,function(){r.request.overrideMimeType(t)}),this},set:function(t,n){return e(r,function(){r.request.setRequestHeader(t,n)}),this},then:function(t){return e(r,function(){r.callbacks.push(t)}),this}};return u.methods.indexOf(t.toUpperCase())<0&&(n=t,t="GET"),r.request.addEventListener("load",function(){r.callbacks.forEach(function(e){a["do"](e)})}),r.request.open(t,n,!0),e(r),a}function n(e){t[e]=function(n){return t(e,n)}}var u={methods:["GET","POST","PUT","DELETE","HEAD","OPTIONS"],delay:50};return t.delay=function(e){return u.delay=e||u.delay,u.delay},u.methods.forEach(n),t}();